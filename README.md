# ООО Реммаш - Производство теплообменного оборудования

## Описание проекта

ООО Реммаш - производство теплообменного оборудования для нефтегазовой промышленности с 2005 года. 
Сайт представляет собой современное веб-приложение с каталогом продукции, сертификатами, 
отзывами клиентов и контактной информацией.

## Технологии

- **Frontend**: Next.js 16, React 19, TypeScript
- **Styling**: Tailwind CSS, Framer Motion для анимаций
- **Backend**: Next.js API Routes
- **Database**: PostgreSQL с Prisma ORM
- **UI Components**: Radix UI, Lucide React
- **Build Tool**: Turbopack (Next.js development)

## Архитектура

- **Frontend**: Next.js App Router с серверными и клиентскими компонентами
- **Backend**: API routes с обработкой запросов и валидацией
- **Data Layer**: Prisma ORM для взаимодействия с PostgreSQL
- **Types**: Централизованные TypeScript типы в `/types/index.ts`

## Установка и запуск

### Требования

- Node.js 18+ 
- PostgreSQL 12+
- npm или yarn

### Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd remmash
```

2. Установите зависимости:
```bash
npm install
# или
yarn install
```

3. Настройте переменные окружения:
```bash
cp .env.local.example .env.local
```
Отредактируйте `.env.local` и укажите URL вашей базы данных:
```
DATABASE_URL=postgresql://username:password@localhost:5432/remmash?schema=public
```

4. Инициализируйте базу данных:
```bash
npx prisma db push
# или для миграции
npx prisma migrate dev
```

5. Заполните базу данных демонстрационными данными (опционально):
```bash
npm run prisma:seed
# или
yarn prisma:seed
```

### Запуск

#### Для разработки:
```bash
npm run dev
# или
yarn dev
```

Приложение будет доступно по адресу [http://localhost:3000](http://localhost:3000)

#### Для продакшена:

1. Соберите приложение:
```bash
npm run build
# или
yarn build
```

2. Запустите продакшен-сервер:
```bash
npm run start
# или
yarn start
```

## Структура проекта

```
remmash/
├── app/                    # Next.js App Router
│   ├── api/               # API routes
│   ├── products/          # Страницы каталога продукции
│   ├── certificates/      # Сертификаты
│   ├── reviews/           # Отзывы
│   ├── contacts/          # Контактная информация
│   ├── layout.tsx         # Основной layout
│   └── page.tsx           # Главная страница
├── components/            # Повторно используемые компоненты
├── lib/                   # Вспомогательные функции и сервисы
│   ├── product-service.ts # Сервис для работы с продуктами
│   └── utils.ts          # Утилиты
├── types/                 # Типы TypeScript
├── config.ts              # Конфигурационные параметры (включая пагинацию)
├── prisma/                # Конфигурация и миграции Prisma
├── public/                # Публичные файлы
├── __tests__/             # Тесты
└── docs/                  # Документация
```

## Конфигурация

Основные параметры приложения определены в `config.ts`, включая настройки пагинации:
- `pagination.defaultLimit` - количество элементов на странице по умолчанию (10)
- `pagination.maxLimit` - максимальное количество элементов на странице (50)
- `pagination.minLimit` - минимальное количество элементов на странице (1)
```

## Основные функции

### Каталог продукции
- Просмотр всех продуктов с пагинацией
- Фильтрация по категориям
- Детальная страница каждого продукта

### Сертификаты
- Галерея сертификатов компании
- Модальное окно для просмотра

### Отзывы клиентов
- Отображение отзывов с рейтингом
- Сортировка и фильтрация

### Контакты
- Контактная информация
- Карта местоположения
- Контакты руководства

## Типы данных

Все типы данных определены в `types/index.ts`:
- Product, ProductCategory - для продукции
- Certificate - для сертификатов
- Review - для отзывов
- ContactInfo, CompanyInfo - для контактной информации
- и другие

## Безопасность

- Валидация входных данных в API routes
- Санитизация пользовательского ввода
- Защита от XSS и CSRF атак
- Правильная настройка HTTP заголовков

## Стили и UI

- Tailwind CSS для стилизации
- Согласованные цвета и шрифты
- Адаптивный дизайн
- Плавные анимации с Framer Motion

## Тестирование

Для запуска тестов:
```bash
npm run test
# или
yarn test
```

Тесты расположены в папке `__tests__` и покрывают:
- Валидацию параметров
- Утилиты
- Базовую функциональность API

## Деплоймент

Приложение готово к деплою на Vercel, Netlify или любом другом провайдере, 
поддерживающем Next.js 16.

### Vercel
```bash
vercel --prod
```

## Расширение функциональности

### Добавление новой страницы
1. Создайте новую папку в `app/`
2. Добавьте `page.tsx` с содержимым страницы
3. Определите метаданные если необходимо

### Добавление нового API endpoint
1. Создайте папку в `app/api/`
2. Добавьте `route.ts` с обработчиками HTTP методов
3. Обязательно добавьте валидацию и типизацию

### Настройка пагинации
Пагинация настраивается в `config.ts`:
- `pagination.defaultLimit` - количество элементов на странице по умолчанию
- `pagination.maxLimit` - максимальное количество элементов на странице
- `pagination.minLimit` - минимальное количество элементов на странице

Изменение этих значений повлияет на все страницы с пагинацией во всем приложении.

### Аутентификация и админ панель
Аутентификация реализована с использованием NextAuth.js с JWT:
- Страница логина доступна по маршруту `/rm-login`
- Админ панель защищена и доступна по маршруту `/admin`
- Для входа используйте учетные данные, указанные в `.env.local`
- Middleware защищает маршруты, начинающиеся с `/admin`

#### Настройка учетных данных администратора
1. Обновите переменные в `.env.local`:
```
ADMIN_USERNAME=ваш_логин
ADMIN_PASSWORD=ваш_пароль
NEXTAUTH_SECRET=ваш_секретный_ключ
```

2. Для генерации хеша пароля используйте команду:
```bash
npm run hash-password
```

3. Замените хеш в `lib/auth.ts` на сгенерированный

## Стандарты кодирования

- Использование TypeScript с строгой типизацией
- Чистые функции с минимальными side effects
- Согласованные имена переменных и функций
- Комментарии к сложной логике
- Единый стиль форматирования (Prettier)

## Сторонние библиотеки

- `framer-motion` - анимации
- `lucide-react` - иконки
- `@prisma/client` - ORM
- `class-variance-authority` - стили компонентов
- `tailwind-merge` - объединение классов

## Поддержка и обслуживание

- Регулярное обновление зависимостей
- Мониторинг ошибок и производительности
- Покрытие тестами критических путей
- Документирование изменений

## Лицензия

[Укажите лицензию при необходимости]